{
  "description": "Add error handling for missing keys in logs.summarize_tail function",
  "diff": "diff --git a/agent/core.py b/agent/core.py\nindex abcdef1..abcdef2 100644\n--- a/agent/core.py\n+++ b/agent/core.py\n@@ -93,7 +93,11 @@ def _format_tool_output(tool_name: str, out: Any) -> Optional[str]:\n         lines.append(f\"    - {item.get('tool')} ({item.get('count')})\")\n \n     if notes:\n-        lines.append(\"  Notes:\")\n+        try:\n+            lines.append(\"  Notes:\")\n+            for n in notes:\n+                lines.append(f\"    - {n}\")\n+        except AttributeError:\n+            pass\n \n     if preview:\n         lines.append(\"  Tail preview:\")"
}